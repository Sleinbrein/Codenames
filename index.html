

<!DOCTYPE html>
<html>
   <head>
      <title>Codenames</title>

      <!-- BOOTSTRAP -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">

      <!-- JQUERY -->
      <script src="jquery-3.5.1.min.js"></script>

      <!-- CUSTOM CSS -->
      <link rel="stylesheet" href="styles.css">

      <!-- FONTS -->
      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet"> 
   </head>
   <body>
      <!-- NAVIGATION BAR -->
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
         <a class="navbar-brand" href="#"><b>CODENAMES</b></a>
         <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
         <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
               <li class="nav-item">
                  <a class="nav-link" href="#">How to play</a>
               </li>
               <li class="nav-item ">
                  <a class="nav-link" href="#">Rules</a>
               </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
               <button id="createGame" type="button" class="btn btn-primary">Create a new game</button>

               <!-- CREATE A GAME -->
               <script>

                  function voegToe(){
              
              
                      let data = {
                          actie: 'toevoegen'
                      };
              
                      fetch('cgi-bin/createGame.cgi?data=' + JSON.stringify(data))
                          .then(response => response.json())
                          .then(data => {
                              console.log(data);
                          });
                  }
              
                  $(function(){
                      $('#createGame').click(function(){
                          console.log("TESTJEUHEHFASO")
                          voegToe();
                      })
                  })
                  
              </script>

               <input class="form-control mr-sm-2" type="search" placeholder="Enter a game code..." aria-label="Search">
               <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Connect</button>
            </form>
         </div>
      </nav>
      
      <!-- GAME STATS BAR -->
      <div class="stats">
         <p class="curplayer">Current Player: RED</p>
         <p style="color:#ff7675;">Red: 0</p>
         <p style="color:#74b9ff">Blue: 0</p>
         <button type="button" class="btn btn-secondary">End turn</button>
      </div>
      


      <div class="playboardcontainer">

        <div id="playboard">

            <script>
               
               let request = new XMLHttpRequest();
               request.open('GET', 'data/MSZHIIQR.json');
               request.responseType = 'json';
               request.send();

               request.onload = function(){
                  let borddata  = request.response;

                  for(let i = 0; i < 25; i++){
                     let woord = borddata["board"][i][0]
                     let kleur = borddata["board"][i][1]
                     
                     // change colors to a nicer color
                     if(kleur === 'red'){
                        kleur = '#ff7675'
                     }else if(kleur === 'blue'){
                        kleur = '#74b9ff'
                     }

                  document.getElementById('playboard').innerHTML += '<div class="playcart omgedraaid" style="background-color:'+ kleur +'"><p class="playcartword">' + woord + '</p></div>'
                  }


                  
                  tiles = document.getElementsByClassName("playcart")
                  // draai de tegel om als je er op clickt
                  $(tiles).click(function(){
                     $(this).removeClass("omgedraaid")
                     // geef de click door aan de webserver
                     // get the word you've clicked
                     clickedWord = $(this).text()
                     console.log($(this).text())


                     // update the data of the clicked tile
                     for(let i = 0; i < 25; i++){
                        if(clickedWord === borddata['board'][i][0]){
                           tiledata = borddata['board'][i];
                           if(tiledata[2] === false){
                              borddata['board'][i][2] = true         
                           }
                        }
                     }
                     // for(let tegel of borddata['board'][1]){
                     //    console.log(tegel);
                     // };

                     newBoardData = JSON.stringify(borddata);
                     console.log(newBoardData)

                     toJson();
                     console.log(borddata)
                  });


                  // als je op de assasin klikt verlies je
                  $("div").click(function(){
                     if ($(this).css('background-color')=="rgb(45, 52, 54)") alert("matched");
                  });
                  
               }


               //Toggle spymaster when the user clicks to checkbox (we need to remove every "omgedraaid" class from all the playcarts)
               function toggleSpyMaster(){
                     const checkbox = document.getElementById("togglespy")
                     const tiles = document.getElementsByClassName('playcart')
                     if(checkbox.checked){
                        $(tiles).removeClass("omgedraaid")
                     }else{
                        $(tiles).addClass("omgedraaid")
                     }
                  }

               
               function zet(){
                  const selectedTile = document.getElementById
               }

               // write the data to the json file
               function toJson(){
                  
                  console.log("Ik stuur het door naar json.")
               }
               
            </script>


            <!-- SPYMASTER TOGGLE -->
            <div class="spymaster">
               <p>Spymaster</p>
               <input id='togglespy' type="checkbox" onclick="toggleSpyMaster()">
            </div>


         </div>     
      </div>
      

   </body>
</html>

